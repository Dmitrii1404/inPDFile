<h1 style="text-align: center;">inPDFile</h1>

<h2 style="text-align: center;">Описание проекта</h2>


**inPDFile** — это приложение для классификации PDF-документов с использованием машинного обучения, предназначенное для определения, является ли файл официальным документом. В рамках проекта реализована модель машинного обучения, которая анализирует различные характеристики PDF-файлов, такие как их структура, метаданные и текстовое содержимое, чтобы классифицировать документ как официальный или неофициальный.

<h2 style="text-align: center;">Запуск приложения</h2>

1. **Создание виртуального окружения:**

```bash
python -m venv venv
```

2. **Запуск uvicorn сервера:**

```bash
uvicorn app.main:app --reload
```




## Структура проекта

Проект состоит из нескольких основных каталогов и файлов, каждый из которых отвечает за конкретную часть функциональности. Здесь представлена структура проекта и описание основных компонентов.


- **app/**
  - **dao/**
    - `base.py`                - Файл с общими операциями для работы с базой данных
  - **images/**                - Папка для хранения изображений (фотографий)
  - **migrations/**            - Папка для хранения миграций базы данных
  - **pages/**                 - Папка для обработки страниц (например, генерация превью, извлечение текста из страниц PDF)
  - **pdf/**                   - Папка для реализации методов и ML для работы с PDF
    - `parsing.py`             - Методы для парсинга PDF
    - `processing.py`          - Методы для обработки PDF
    - `ml.py`                  - ML-модели для анализа или обработки PDF
  - **static/**                - Папка для хранения статичных файлов
  - **tasks/**                 - Папка для Celery задач (асинхронная обработка PDF)
    - `pdf_tasks.py`           - Асинхронные задачи для обработки PDF файлов через Celery
  - **users/**                 - Папка для работы с пользователями
    - `auth.py`                - Логика аутентификации пользователей (JWT)
    - `dao.py`                 - Операции для работы с базой данных пользователей
    - `dependencies.py`        - Зависимости для работы с пользователями
    - `models.py`              - Модели данных для пользователей
    - `router.py`              - Маршруты для API пользователей
    - `schemas.py`             - Pydantic схемы для валидации данных пользователей
  - `config.py`                - Конфигурационный файл (параметры для подключения к БД, настройки Celery)
  - `database.py`              - Подключение и настройка базы данных (SQLAlchemy)
  - `exceptions.py`            - Исключения, которые могут возникать в приложении
  - `main.py`                  - Точка запуска приложения FastAPI



## Основные возможности проекта

1. **Классификация PDF-документов**:
   - Модель обучена на большом наборе данных, включающем различные типы документов, что позволяет точно определять, является ли документ официальным.
   - Под официальными документами понимаются, например, контракты, акты, справки, договоры, официальные письма и прочие документы, имеющие юридическую силу.
   - Модель использует различные признаки документа (метаданные, шрифты, структура текста) для принятия решения.

2. **Обработка и анализ PDF-файлов**:
   - Приложение поддерживает загрузку PDF-документов, извлечение из них текста и метаданных.
   - Включает в себя функционал для предварительной обработки PDF (например, извлечение текста, преобразование форматов и другие операции), что помогает улучшить точность классификации.

3. **Машинное обучение**:
   - Процесс классификации основывается на анализе текста и метаданных документа с помощью предобученной модели.
   - Для улучшения качества работы используются различные алгоритмы машинного обучения, такие как логистическая регрессия, SVM, нейронные сети и другие, в зависимости от характеристик данных.

4. **API для интеграции**:
   - Приложение предоставляет REST API, позволяя интегрировать функциональность классификации PDF-документов в другие системы.
   - Через API можно загружать PDF-документы и получать ответ, является ли файл официальным.

5. **Поддержка больших объемов данных**:
   - В проекте реализованы асинхронные задачи с использованием Celery для обработки больших объемов PDF-документов.
   - Благодаря этому система может обрабатывать документы без блокировки основного потока приложения.

6. **Модуль для работы с пользователями**:
   - Реализована аутентификация пользователей через JWT-токены, что позволяет предоставлять доступ к функционалу только авторизованным пользователям.
   - Есть возможность управлять доступом и правами пользователей, чтобы гарантировать безопасность и конфиденциальность данных.

## Структура проекта

Проект состоит из нескольких ключевых компонентов:

- **ML-модели для классификации**: В папке `pdf/ml.py` хранится код, реализующий и обучающий модель машинного обучения для классификации документов. Модель обучена на метках "официальный" и "неофициальный" и использует такие признаки, как:
  - Структура документа (наличие заголовков, подписей, логотипов).
  - Текстовые особенности (форматирование, использование юридической лексики).
  - Метаданные (например, автор, дата создания документа).

- **Обработка PDF-документов**: В папке `pdf/parsing.py` реализованы функции для извлечения текста и метаданных из PDF-документов, что служит основой для дальнейшего анализа.

- **API**: В папке `users/router.py` находятся маршруты, через которые пользователи могут загружать PDF-файлы и получать результат классификации.

- **Задачи Celery**: Для асинхронной обработки документов в папке `tasks/pdf_tasks.py` реализованы задачи, которые позволяют обрабатывать документы в фоновом режиме.

## Пример использования

1. **Загрузка документа**:
   Пользователь загружает PDF-документ через веб-интерфейс или API. Документ передается в систему для дальнейшего анализа.

2. **Предобработка документа**:
   Система извлекает текст, метаданные и анализирует структуру документа с помощью функций из модуля `pdf/parsing.py`.

3. **Классификация**:
   После извлечения данных, модель машинного обучения классифицирует документ как "официальный" или "неофициальный" на основе обученных признаков.

4. **Ответ пользователю**:
   Результат классификации передается обратно пользователю через веб-интерфейс или API.

## Технологии и инструменты

- **FastAPI**: Используется для создания REST API, что позволяет легко интегрировать проект в другие системы и предоставлять доступ к функционалу.
- **Celery**: Используется для асинхронной обработки PDF-документов.
- **Scikit-learn**: Библиотека для машинного обучения, используемая для построения модели классификации.
- **PDFMiner, PyMuPDF**: Используются для извлечения текста и метаданных из PDF-документов.
- **SQLAlchemy**: ORM для работы с базой данных, где хранятся метаданные о документах и результатах классификации.

## Заключение

Проект **inPDFile** предоставляет удобный инструмент для классификации PDF-документов, позволяя эффективно определять, является ли документ официальным. Система использует современные методы машинного обучения для анализа документа, обеспечивая высокую точность классификации.
